/*!
 * fidel - a ui view controller
 * v2.0.2
 * https://github.com/jgallen23/fidel
 * copyright JGA 2012
 * MIT License
*/
(function(e,t){var n=0,r=function(e){this.obj=e};r.prototype.__init=function(e){t.extend(this,this.obj),this.id=n++,this.els={},this.obj.defaults=this.obj.defaults||{},t.extend(this,this.obj.defaults,e),t("body").trigger("FidelPreInit",this),this.setElement(this.el||t("<div/>")),this.init&&this.init(),t("body").trigger("FidelPostInit",this)},r.prototype.eventSplitter=/^(\w+)\s*(.*)$/,r.prototype.setElement=function(e){this.el=e,this.getElements(),this.delegateEvents(),this.delegateActions()},r.prototype.find=function(e){return this.el.find(e)},r.prototype.proxy=function(e){return t.proxy(e,this)},r.prototype.getElements=function(){if(!this.elements)return;for(var e in this.elements){var t=this.elements[e];this.els[t]=this.find(e)}},r.prototype.delegateEvents=function(){var e=this;if(!this.events)return;for(var t in this.events){var n=this.events[t],r=t.match(this.eventSplitter),i=r[1],s=r[2],o=this.proxy(this[n]);s===""?this.el.on(i,o):this.els[s]?this.els[s].on(i,o):this.el.on(i,s,o)}},r.prototype.delegateActions=function(){var e=this;e.el.on("click","[data-action]",function(n){var r=t(this),i=r.attr("data-action");e[i]&&e[i](n,r)})},r.prototype.on=function(e,t){this.el.on(e+".fidel"+this.id,t)},r.prototype.one=function(e,t){this.el.one(e+".fidel"+this.id,t)},r.prototype.emit=function(e,t,n){var r=n?".fidel"+this.id:"";this.el.trigger(e+r,t)},r.prototype.hide=function(){if(this.views)for(var e in this.views)this.views[e].hide();this.el.hide()},r.prototype.show=function(){if(this.views)for(var e in this.views)this.views[e].show();this.el.show()},r.prototype.destroy=function(){this.el.empty(),this.emit("destroy"),this.el.unbind(".fidel"+this.id)},r.declare=function(e){var t=function(e,t){this.__init(e,t)};return t.prototype=new r(e),t},r.onPreInit=function(e){t("body").on("FidelPreInit",function(t,n){e.call(n)})},r.onPostInit=function(e){t("body").on("FidelPostInit",function(t,n){e.call(n)})},t.declare=function(e,n){t.fn[e]=function(){var i=Array.prototype.slice.call(arguments),s=i.shift();return this.each(function(){var o=t(this),u=o.data(e);if(!u){var a=r.declare(n),f=t.extend({},s,{el:o});u=new a(f),o.data(e,u)}typeof s=="string"&&u[s].apply(u,i)})},t.fn[e].defaults=n.defaults||{}},t.Fidel=r,e.Fidel=r})(window,window.jQuery||window.Zepto);