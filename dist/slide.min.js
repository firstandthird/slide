/*!
 * slide - a generic slider
 * v0.14.0-beta.4
 * https://github.com/firstandthird/slide/
 * copyright First+Third 2014
 * MIT License
*/
!function(a,b){var c=0,d=function(a){this.obj=a};d.prototype.__init=function(a){b.extend(this,this.obj),this.id=c++,this.namespace=".fidel"+this.id,this.obj.defaults=this.obj.defaults||{},b.extend(this,this.obj.defaults,a),b("body").trigger("FidelPreInit",this),this.setElement(this.el||b("<div/>")),this.init&&this.init(),b("body").trigger("FidelPostInit",this)},d.prototype.eventSplitter=/^(\w+)\s*(.*)$/,d.prototype.setElement=function(a){this.el=a,this.getElements(),this.dataElements(),this.delegateEvents(),this.delegateActions()},d.prototype.find=function(a){return this.el.find(a)},d.prototype.proxy=function(a){return b.proxy(a,this)},d.prototype.getElements=function(){if(this.elements)for(var a in this.elements){var b=this.elements[a];this[b]=this.find(a)}},d.prototype.dataElements=function(){var a=this;this.find("[data-element]").each(function(c,d){var e=b(d),f=e.data("element");a[f]=e})},d.prototype.delegateEvents=function(){if(this.events)for(var a in this.events){var b=this.events[a],c=a.match(this.eventSplitter),d=c[1],e=c[2],f=this.proxy(this[b]);""===e?this.el.on(d+this.namespace,f):this[e]&&"function"!=typeof this[e]?this[e].on(d+this.namespace,f):this.el.on(d+this.namespace,e,f)}},d.prototype.delegateActions=function(){var a=this;a.el.on("click"+this.namespace,"[data-action]",function(c){var d=b(this),e=d.attr("data-action");a[e]&&a[e](c,d)})},d.prototype.on=function(a,b){this.el.on(a+this.namespace,b)},d.prototype.one=function(a,b){this.el.one(a+this.namespace,b)},d.prototype.emit=function(a,b,c){var d=c?this.namespace:"";this.el.trigger(a+d,b)},d.prototype.hide=function(){if(this.views)for(var a in this.views)this.views[a].hide();this.el.hide()},d.prototype.show=function(){if(this.views)for(var a in this.views)this.views[a].show();this.el.show()},d.prototype.destroy=function(){this.el.empty(),this.emit("destroy"),this.el.unbind(this.namespace)},d.declare=function(a){var b=function(a,b){this.__init(a,b)};return b.prototype=new d(a),b},d.onPreInit=function(a){b("body").on("FidelPreInit",function(b,c){a.call(c)})},d.onPostInit=function(a){b("body").on("FidelPostInit",function(b,c){a.call(c)})},a.Fidel=d}(window,window.jQuery||window.Zepto),function(a){a.declare=function(b,c){a.fn[b]=function(){var d,e,f=Array.prototype.slice.call(arguments),g=f.shift();return e=this.each(function(){var e=a(this),h=e.data(b);if(!h){var i=Fidel.declare(c),j=a.extend({},g,{el:e});h=new i(j),e.data(b,h)}"string"==typeof g&&(d=h[g].apply(h,f))}),"undefined"!=typeof d?d:e},a.fn[b].defaults=c.defaults||{}},a.Fidel=window.Fidel}(jQuery),function(a){a.declare("slide",{defaults:{page:1,itemsPerPage:1,duration:500,containerClass:"slide-container",overrideTransition:!1,wrap:!1},init:function(){this.el.css("position","relative"),this.items=this.el.children(),this.pageCount=Math.ceil(this.items.length/this.itemsPerPage),this.updateWidth(),this._createContainer(),this.container.queue("fx"),this.animating=!1,this.go(this.page),this.emit("init.slide")},updateWidth:function(){var a=this.el.width();this.pageWidth=a;var b=a/this.itemsPerPage;this.items.css({width:b,"float":"left"})},_createContainer:function(){this.el.children().wrapAll('<div class="'+this.containerClass+'"/>'),this.container=this.el.find("."+this.containerClass);var b=a("<div/>").css({overflow:"hidden",position:"relative"});this.container.wrap(b),this.container.css({position:"relative",width:this.pageWidth*this.items.length})},getCurrentPage:function(){return this.currentPage},getPageCount:function(){return this.pageCount},getContainer:function(){return this.container},setTransition:function(a){this.overrideTransition=a},goNext:function(a){var b=this;this.go(this.currentPage+1,function(){b.emit("next.slide",b.currentPage),a&&a()})},goPrevious:function(a){var b=this;this.go(this.currentPage-1,function(){b.emit("previous.slide",b.currentPage),a&&a()})},goFirst:function(a){this.go(1,a)},goLast:function(a){this.go(this.pageCount,a)},go:function(a,b){if(this.animating)return!1;if(a>this.pageCount||1>a){if(!this.wrap)return void("function"==typeof b&&b());a=1>a?this.pageCount:1}var c=this.currentPage||1;this.emit("beforeSlide.slide",[c,a]);var d=this;this.currentPage=a;var e=this.overrideTransition||this._slideTo;e.call(this,this.currentPage,c,function(){d.emit("slide.slide",d.currentPage),1==d.currentPage?d.emit("first.slide"):d.currentPage==d.pageCount&&d.emit("last.slide"),"function"==typeof b&&b(d.currentPage)})},_slideTo:function(a,b,c){var d="-"+this.pageWidth*(a-1);this.container.animate({left:d},this.duration,c)}})}(jQuery),function(a){a.declare("slideButtons",{defaults:{previousText:"Previous",previousClass:"slide-previous",nextText:"Next",nextClass:"slide-next",offsetX:10,offsetY:0,autoHide:!1},init:function(){this.setupButtons(),this.el.data("slide").wrap||(this.el.on("first.slide",this.proxy(this.hidePreviousButton)),this.el.on("last.slide",this.proxy(this.hideNextButton)),this.el.on("slide.slide",this.proxy(this.showButtons)))},setupButtons:function(){if(this.prevButton=a("<button/>").addClass(this.previousClass).text(this.previousText).css({display:this.autoHide?"none":"block",position:"absolute",top:50-this.offsetY+"%",left:this.offsetX,zIndex:1100}).on("click",this.proxy(this.prev)).appendTo(this.el),this.nextButton=a("<button/>").addClass(this.nextClass).text(this.nextText).css({display:this.autoHide?"none":"block",position:"absolute",top:50-this.offsetY+"%",right:this.offsetX,zIndex:1100}).on("click",this.proxy(this.next)).appendTo(this.el),this.autoHide){var b=this;this.el.hover(function(){b.nextButton.fadeIn(),b.prevButton.fadeIn()},function(){b.nextButton.fadeOut(),b.prevButton.fadeOut()})}},prev:function(){this.el.slide("goPrevious")},next:function(){this.el.slide("goNext")},hidePreviousButton:function(){this.prevButton.css("visibility","hidden")},hideNextButton:function(){this.nextButton.css("visibility","hidden")},showButtons:function(){this.nextButton.css("visibility","visible"),this.prevButton.css("visibility","visible")}})}(jQuery),function(a){a.declare("slideCssAnimations",{defaults:{animationEndEvents:"animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",animationBaseClass:"slide-transition",itemActiveClass:"slide-active"},init:function(){void 0===this.el[0].style.animationName;var b=this.el.data("slide");this.animating=!1,this.container=this.el.slide("getContainer"),this.slides=this.container.children();var c=b.pageWidth;this.slides.each(function(b){a(this).css({left:"-"+b*c+"px"})}),this.slides.eq(0).addClass(this.itemActiveClass),this.el.slide("setTransition",this.proxy(this.transition))},transition:function(b,c,d){var e=this,f=b>c?"next":"prev";this.animating=!0,a(this.slides).one(this.animationEndEvents,function(){e.animating=!1,e.container.find("."+e.itemActiveClass).removeClass(e.itemActiveClass),a(e.slides[c-1]).removeClass(e.animationBaseClass+"-"+f+"-out"),a(e.slides[b-1]).removeClass(e.animationBaseClass+"-"+f+"-in").addClass(e.itemActiveClass),a(e.slides).unbind(e.animationEndEvents),d&&d()}),a(this.slides[c-1]).addClass(this.animationBaseClass+"-"+f+"-out "+this.itemActiveClass),a(this.slides[b-1]).addClass(this.animationBaseClass+"-"+f+"-in "+this.itemActiveClass)}})}(jQuery),function(a){a.declare("slideIndicators",{defaults:{element:"<div/>",activeClass:"slide-indicator-active",itemClass:"slide-indicator",containerClass:"slide-indicators",offsetY:0,allowClick:!0},init:function(){this.sliderContainer=this.el.slide("getContainer"),this.pageCount=this.el.slide("getPageCount"),this.indicatorContainer=a(this.element).addClass(this.containerClass).css({position:"absolute",bottom:this.offsetY<0?-1*this.offsetY:0,width:"100%",overflow:"hidden","text-align":"center",clear:"both"}).appendTo(this.el),this.offsetY>0&&this.indicatorContainer.css({position:"static",marginTop:this.offsetY}),this.createIndicators(),this.indicators=a("."+this.itemClass),this.allowClick&&this.indicators.bind("click",this.proxy(this.indicatorClicked));var b=this;this.el.on("beforeSlide.slide",function(a,c,d){b.setIndicators(d)}),b.setIndicators(this.el.slide("getCurrentPage"))},setIndicators:function(a){this.indicators.removeClass(this.activeClass),this.indicators.eq(a-1).addClass(this.activeClass)},createIndicators:function(){for(var a,b=[],c=1,d=this.pageCount;d>=c;c++)a='<span class="'+this.itemClass+'" data-slide-index="'+c+'"></span>',b.push(a);this.indicatorContainer.append(b)},indicatorClicked:function(b){var c=a(b.currentTarget).data("slide-index");this.el.slide("go",c)}})}(jQuery),function(a){a.declare("slidePreview",{init:function(){if(this.slide=this.el.data("slide"),!this.slide)throw new Error("slidePreview() must be called after slide()");var a=this.slide.items,b=a.first().clone(),c=a.last().clone();c.insertBefore(a.first()),b.insertAfter(a.last()),this.slide.items=this.slide.container.children(),this.slide.container.css("width",this.slide.pageWidth*this.slide.items.length),this.slide.container.css("marginLeft",this.slide.pageWidth/2*-1),this.el.css("width","+="+this.slide.pageWidth)}})}(jQuery);