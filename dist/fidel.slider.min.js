/*!
 * fidel-slider - a generic slider using fidel
 * v0.9.0
 * https://github.com/jgallen23/fidel-slider
 * copyright JGA 2014
 * MIT License
*/
!function(a){a.declare("slider",{defaults:{page:1,itemsPerPage:1,duration:500,itemClass:"item",containerClass:"container",auto:!1,autoDelay:5e3,indicators:!1,indicatorClass:"active",indicatorClick:!0,wrap:!0,previews:!1},events:{mouseover:"stop",mouseout:"start"},elements:{"[data-action=previous]":"previousButton","[data-action=next]":"nextButton"},init:function(){this.items=this.find("."+this.itemClass),this.pageCount=Math.ceil(this.items.length/this.itemsPerPage),this.container=this.find("."+this.containerClass),this.container.queue("fx"),this.updateWidth(this.items.first().outerWidth(!0)),this.go(this.page),this.auto&&this.start(),this.indicators&&this.indicatorClick&&this.el.find(this.indicators).on("click",this.proxy(this.indicatorClicked)),this.updatePreview()},getCurrentPage:function(){return this.currentPage},getPageCount:function(){return this.pageCount},next:function(a){this.go(this.currentPage+1,a),this.emit("next",this.currentPage)},previous:function(a){this.go(this.currentPage-1,a),this.emit("previous",this.currentPage)},go:function(b,c){if("object"==typeof b&&(b=a(b.target).data("page")),b>this.pageCount||1>b)return void(this.previews||this.wrap?1>b?this.go(this.pageCount,c):this.go(1,c):"function"==typeof c&&c());this.currentPage=b;var d="-"+this.pageWidth*(b-1);if(this._slide(d,c),this.indicators){var e=this.el.find(this.indicators);e.removeClass(this.indicatorClass),e.eq(this.currentPage-1).addClass(this.indicatorClass)}},first:function(a){this.go(1,a)},last:function(a){this.go(this.pageCount,a)},_slide:function(a,b){var c=this;this.emit("beforeSlide",this.currentPage),this.updateButtons(),this.container.animate({left:a},c.duration,function(){c.emit("slide",c.currentPage),"function"==typeof b&&b()})},updateButtons:function(){1!=this.currentPage||this.previews||this.wrap?this.previousButton.show():(this.previousButton.hide(),this.emit("first",this.currentPage)),this.currentPage!=this.pageCount||this.previews||this.wrap?this.nextButton.show():(this.nextButton.hide(),this.emit("last",this.currentPage))},updatePreview:function(){if(this.previews){var a=this.find("."+this.itemClass),b=a.first().clone(),c=a.last().clone();c.insertBefore(a.first()),b.insertAfter(a.last())}},start:function(a){if(!a||this.auto){this.auto=!0,this.timeout&&clearTimeout(this.timeout);var b=this;this.timeout=setTimeout(function(){b.wrap&&b.currentPage==b.pageCount&&(b.currentPage=0),b.next(),b.start()},this.autoDelay)}},stop:function(){this.auto&&clearTimeout(this.timeout)},indicatorClicked:function(a){var b=this.el.find(this.indicators).index(a.currentTarget);this.go(b+1)},updateWidth:function(b){b||(b=a(window).width()),this.pageWidth=b*this.itemsPerPage,this.previews?(this.el.css("width",2*b),this.el.find(".wrapper").css("margin-left","-"+b/2+"px")):this.el.css("width",this.pageWidth),this.container.css({left:"-"+~~(this.pageWidth*(0===this.currentPage?0:this.currentPage-1))+"px"}),this.items.css("width",b)}})}(jQuery);