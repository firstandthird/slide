/*!
 * fidel-slider - a generic slider using fidel
 * v0.4.0
 * https://github.com/jgallen23/fidel-slider
 * copyright JGA 2013
 * MIT License
*/
(function(t,i){var e=0,s=function(t){this.obj=t};s.prototype.__init=function(t){i.extend(this,this.obj),this.id=e++,this.obj.defaults=this.obj.defaults||{},i.extend(this,this.obj.defaults,t),i("body").trigger("FidelPreInit",this),this.setElement(this.el||i("<div/>")),this.init&&this.init(),i("body").trigger("FidelPostInit",this)},s.prototype.eventSplitter=/^(\w+)\s*(.*)$/,s.prototype.setElement=function(t){this.el=t,this.getElements(),this.delegateEvents(),this.dataElements(),this.delegateActions()},s.prototype.find=function(t){return this.el.find(t)},s.prototype.proxy=function(t){return i.proxy(t,this)},s.prototype.getElements=function(){if(this.elements)for(var t in this.elements){var i=this.elements[t];this[i]=this.find(t)}},s.prototype.dataElements=function(){var t=this;this.find("[data-element]").each(function(e,s){var n=i(s),o=n.data("element");t[o]=n})},s.prototype.delegateEvents=function(){if(this.events)for(var t in this.events){var i=this.events[t],e=t.match(this.eventSplitter),s=e[1],n=e[2],o=this.proxy(this[i]);""===n?this.el.on(s,o):this[n]&&"function"!=typeof this[n]?this[n].on(s,o):this.el.on(s,n,o)}},s.prototype.delegateActions=function(){var t=this;t.el.on("click","[data-action]",function(e){var s=i(this),n=s.attr("data-action");t[n]&&t[n](e,s)})},s.prototype.on=function(t,i){this.el.on(t+".fidel"+this.id,i)},s.prototype.one=function(t,i){this.el.one(t+".fidel"+this.id,i)},s.prototype.emit=function(t,i,e){var s=e?".fidel"+this.id:"";this.el.trigger(t+s,i)},s.prototype.hide=function(){if(this.views)for(var t in this.views)this.views[t].hide();this.el.hide()},s.prototype.show=function(){if(this.views)for(var t in this.views)this.views[t].show();this.el.show()},s.prototype.destroy=function(){this.el.empty(),this.emit("destroy"),this.el.unbind(".fidel"+this.id)},s.declare=function(t){var i=function(t,i){this.__init(t,i)};return i.prototype=new s(t),i},s.onPreInit=function(t){i("body").on("FidelPreInit",function(i,e){t.call(e)})},s.onPostInit=function(t){i("body").on("FidelPostInit",function(i,e){t.call(e)})},function(t){t.declare=function(i,e){t.fn[i]=function(){var n,o,a=Array.prototype.slice.call(arguments),r=a.shift();return o=this.each(function(){var o=t(this),h=o.data(i);if(!h){var u=s.declare(e),c=t.extend({},r,{el:o});h=new u(c),o.data(i,h)}"string"==typeof r&&(n=h[r].apply(h,a))}),n||o},t.fn[i].defaults=e.defaults||{}},t.Fidel=s}(jQuery),t.Fidel=s})(window,window.jQuery||window.Zepto),function(t){t.declare("slider",{defaults:{page:1,itemsPerPage:1,duration:500,itemClass:"item",containerClass:"container",auto:!1,autoDelay:5e3,indicators:!1,indicatorClass:"active",wrap:!0},events:{mouseover:"stop",mouseout:"start"},elements:{"[data-action=previous]":"previousButton","[data-action=next]":"nextButton"},init:function(){var t=this.find("."+this.itemClass);this.pageCount=Math.ceil(t.length/this.itemsPerPage),this.pageWidth=t.outerWidth(!0)*this.itemsPerPage,this.container=this.find("."+this.containerClass),this.container.queue("fx"),this.el.css("width",this.pageWidth),this.go(this.page),this.auto&&this.start()},getCurrentPage:function(){return this.currentPage},next:function(t){this.go(this.currentPage+1,t),this.emit("next",this.currentPage)},previous:function(t){this.go(this.currentPage-1,t),this.emit("previous",this.currentPage)},go:function(i,e){if("object"==typeof i&&(i=t(i.target).data("page")),i>this.pageCount||1>i)return"function"==typeof e&&e(),void 0;this.currentPage=i;var s="-"+this.pageWidth*(i-1);if(this._slide(s,e),this.indicators){var n=this.el.find(this.indicators);n.removeClass(this.indicatorClass),n.eq(this.currentPage-1).addClass(this.indicatorClass)}},first:function(t){this.go(1,t)},last:function(t){this.go(this.pageCount,t)},_slide:function(t,i){var e=this;this.emit("beforeSlide",this.currentPage),this.updateButtons(),this.container.animate({left:t},e.duration,function(){e.emit("slide",e.currentPage),"function"==typeof i&&i()})},updateButtons:function(){1==this.currentPage?(this.previousButton.hide(),this.emit("first",this.currentPage)):this.previousButton.show(),this.currentPage==this.pageCount?(this.nextButton.hide(),this.emit("last",this.currentPage)):this.nextButton.show()},start:function(t){if(!t||this.auto){this.auto=!0,this.timeout&&clearTimeout(this.timeout);var i=this;this.timeout=setTimeout(function(){i.wrap&&i.currentPage==i.pageCount&&(i.currentPage=0),i.next(),i.start()},this.autoDelay)}},stop:function(){this.auto&&clearTimeout(this.timeout)}})}(jQuery);